<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nhà Thông Minh - Arduino IoT Dashboard</title>
    <meta name="description" content="Hệ thống điều khiển và giám sát nhà thông minh với Arduino - Quản lý đèn, quạt, nhiệt độ, khí gas và vườn rau" />
    <meta name="author" content="Smart Home System" />

    <meta property="og:title" content="Nhà Thông Minh - Arduino IoT Dashboard" />
    <meta property="og:description" content="Hệ thống điều khiển và giám sát nhà thông minh với Arduino" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <style>
      /* Chatbox button draggable styles */
      #chatbase-bubble-button {
        cursor: move !important;
        user-select: none !important;
      }
      
      #chatbase-bubble-button.dragging {
        transition: none !important;
      }
    </style>
    
    <script>
      window.embeddedChatbotConfig = {
        chatbotId: "5yuoGvi_QBUVJTPqUY0rf",
        domain: "www.chatbase.co"
      }
    </script>
...
          
          // Make chatbox button draggable
          function dragStart(e) {
            if (e.type === "touchstart") {
              initialX = e.touches[0].clientX - xOffset;
              initialY = e.touches[0].clientY - yOffset;
            } else {
              initialX = e.clientX - xOffset;
              initialY = e.clientY - yOffset;
            }
            
            isDragging = true;
            chatButton.classList.add('dragging');
          }
          
          function dragEnd(e) {
            isDragging = false;
            chatButton.classList.remove('dragging');
          }
          
          function drag(e) {
            if (!isDragging) return;
            
            e.preventDefault();
            
            if (e.type === "touchmove") {
              currentX = e.touches[0].clientX - initialX;
              currentY = e.touches[0].clientY - initialY;
            } else {
              currentX = e.clientX - initialX;
              currentY = e.clientY - initialY;
            }
            
            xOffset = currentX;
            yOffset = currentY;
            
            setTranslate(currentX, currentY, chatButton);
          }
          
          function setTranslate(xPos, yPos, el) {
            el.style.transform = `translate3d(${xPos}px, ${yPos}px, 0)`;
          }
          
          // Add event listeners for dragging button only
          chatButton.addEventListener('mousedown', dragStart);
          document.addEventListener('mouseup', dragEnd);
          document.addEventListener('mousemove', drag);
          
          // Touch events for mobile
          chatButton.addEventListener('touchstart', dragStart);
          document.addEventListener('touchend', dragEnd);
          document.addEventListener('touchmove', drag);
          
          // Position chat window relative to button
          const observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
              if (mutation.attributeName === 'style') {
                const isVisible = chatWindow.style.display !== 'none' && 
                                chatWindow.style.opacity !== '0' &&
                                chatWindow.style.visibility !== 'hidden';
                
                if (isVisible) {
                  // Position chat window next to button
                  const buttonRect = chatButton.getBoundingClientRect();
                  chatWindow.style.bottom = (window.innerHeight - buttonRect.bottom + buttonRect.height + 10) + 'px';
                  chatWindow.style.right = (window.innerWidth - buttonRect.right) + 'px';
                }
              }
            });
          });
          
          observer.observe(chatWindow, { attributes: true });
          
        }, 2000);
      });
    </script>
  </body>
</html>
